# Hope

Hope is a very lightweight PHP microframework.

Check a [example of Hope application](https://github.com/pedrofaria/hope-test-app/tree/develop)

## Installation

TODO!

***

## Configuration

### Routes

This applications is already configured to attend the test, but if you want create new endpoints. All routes are defined at `config/routes.php`.

Map all your routes to your actions.

```php
$route->add(METHOD, URI, ACTION);
```

If you want to map more than one method to the same action, use:

```php
$route->add([METHOD1, METHOD2], URI, ACTION);
```

You can define parameters on URI using braces. Example:

	/recipes/{id}

Now the parameter id will be passed to your controller action. You can also specify an regular expression to your parameter to have a better controls of your URIs, example:

    /recipes/{id:\d+}

Your actions should be defined as string, array or closures. example:

```php
$route->add('GET', '/recipes', 'App\Controller\RecipesController::index');
$route->add('GET', '/recipes', ['App\Controller\RecipesController', 'index']);
$route->add('GET', '/ping', function () {
	return 'pong';
};
```

For more informations, access https://github.com/nikic/FastRoute 

## Extend

### Providers

You can extends or replace some funcionality of Hope using the Dependency Injection system. Just two steps and every thing is running.

1) Create your own Provider

```php
<?php
namespace App\Providers;

class MyRequestProvider implements Hope\Contracts\ProviderInterface
{
    public static function register(Hope\Application $app)
    {
        $app->bind('Hope\Http\Request', function() {
            return new App\Http\MyRequest();
        });
    }
}
```

2) Add it at `config/providers.php`

```php
<?php
return [
    App\Providers\MyRequestProvider::class,
];
```

## Running Tests

Codeception was chosen on this project to support all tests. To run, use the command below:

`$ vendor/bin/codecept run unit`

If you want run with code coverage, use the follow command and the HTML report will be available at `tests/_output/coverage`.

`$ vendor/bin/codecept run unit --coverage --coverage-html`


## Third-party libraries

- [Symfony HttpFoundation](https://symfony.com/doc/current/components/http_foundation.html)

    The HttpFoundation component defines an object-oriented layer for the HTTP specification.

    In PHP, the request is represented by some global variables ($_GET, $_POST, $_FILES, $_COOKIE, $_SESSION, ...) and the response is generated by some functions (echo, header(), setcookie(), ...).

    The Symfony HttpFoundation component replaces these default PHP global variables and functions by an object-oriented layer.
- [PHP-DI](http://php-di.org)

    Very simple and efficient dependency injection container system. The ease of use that made me choose it.
- [FastRoute](https://github.com/nikic/FastRoute)

    Fast router implementation with impressive benchmarks.
- [Codeception](http://codeception.com)

    Complete test environment with the best mock library IMHO. ([AspectMock](https://github.com/Codeception/AspectMock))
